
#export "SCRAM_ARCH=slc5_amd64_gcc462"
#cmsrel CMSSW_5_3_9
#cd CMSSW_5_3_9/src
#cmsenv

#https://twiki.cern.ch/twiki/bin/viewauth/CMS/SuperClusterFootprintRemoval --
#Random cone

# V01-05 bug fix for RC
cd $CMSSW_BASE/src
mkdir PFIsolation; cd PFIsolation; git clone https://github.com/peruzzim/SCFootprintRemoval.git ; cd SCFootprintRemoval ; git checkout V01-05 ;
#------------------PATCH TO HAVE 20 - 30 in RC isolation-----------------------------------------------#
cd $CMSSW_BASE/src/PFIsolation/SCFootprintRemoval/src
patch SuperClusterFootprintRemoval.cc <<EOF
--- SuperClusterFootprintRemoval.cc	2013-10-31 11:21:39.000000000 +0100
+++ /afs/cern.ch/user/a/amarini/work/ProductionAugust2013/CMSSW_5_3_9/src/PFIsolation/SCFootprintRemoval/src/SuperClusterFootprintRemoval.cc	2013-10-29 11:42:04.000000000 +0100
@@ -400,13 +400,13 @@
   bool found=false;
 
   for (reco::PFJetCollection::const_iterator jet=jetHandle->begin(); jet!=jetHandle->end(); jet++){
-    if (jet->pt()<20) continue;
+    if (jet->pt()<30) continue;
     float dR = reco::deltaR(eta,phi,jet->eta(),jet->phi());
     if (dR<mindR) found=true;
   }
 
   for (reco::PhotonCollection::const_iterator pho=photonHandle->begin(); pho!=photonHandle->end(); pho++){
-    if (pho->pt()<10) continue;
+    if (pho->pt()<20) continue;
     float dR = reco::deltaR(eta,phi,pho->eta(),pho->phi());
     if (dR<mindR) found=true;
   }
EOF
##################

## PU Jet ID
cd $CMSSW_BASE/src
mkdir CMGTools ;cd CMGTools ;git clone -b V00-03-04  git@github.com:h2gglobe/External  

########################### TO BE MOVED TO GIT ########################
cd $CMSSW_BASE/src
# are these related to H->gg variables?
cvs co -r V00-00-21 -d EGamma/EGammaAnalysisTools UserCode/EGamma/EGammaAnalysisTools


# 
addpkg  CommonTools/ParticleFlow V00-03-13  
addpkg  RecoParticleFlow/PFProducer V15-01-11

############################ GIT #######################
mkdir amarini; cd amarini; git clone git@github.com:amarini/VPlusJets.git ; cd VPlusJets ; git checkout V00-12 ; cd ../..
git clone git@github.com:amarini/QuarkGluonTagger.git ; cd QuarkGluonTagger ; git checkout v1-2-5 ; cd ..

scram b -j 4

